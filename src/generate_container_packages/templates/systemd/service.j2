[Unit]
Description={{ service.description }}
After=docker.service
Requires=docker.service
{% if is_oidc_app %}
After=halos-authelia-container.service
Wants=halos-authelia-container.service
{% endif %}

[Service]
Type=simple
WorkingDirectory={{ service.working_directory }}
ExecStartPre={{ service.working_directory }}/prestart.sh
EnvironmentFile=-{{ service.env_defaults_file }}
EnvironmentFile=-{{ service.env_file }}
EnvironmentFile=-{{ service.runtime_env_file }}
ExecStart=docker compose up
ExecStop=docker compose down
Restart=on-failure
RestartSec=10
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
