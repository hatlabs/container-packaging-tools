[Unit]
Description={{ service.description }}
After=docker.service
Requires=docker.service

[Service]
Type=simple
WorkingDirectory={{ service.working_directory }}
EnvironmentFile=-{{ service.env_defaults_file }}
EnvironmentFile=-{{ service.env_file }}
ExecStart=/bin/sh -c 'if command -v docker-compose >/dev/null 2>&1; then docker-compose --ansi never up 2>&1; else docker compose --ansi never up 2>&1; fi | sed -u "s/\x1b\[[0-9;]*[a-zA-Z]//g"'
ExecStop=/bin/sh -c 'if command -v docker-compose >/dev/null 2>&1; then docker-compose --ansi never down; else docker compose --ansi never down; fi'
Restart=on-failure
RestartSec=10
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
